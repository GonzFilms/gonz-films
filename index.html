
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gonz Films</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0f172a; 
            color: #e2e8f0; 
        }
        button { 
            cursor: pointer; 
            border: none; 
            font-family: inherit;
        }
        input, textarea, select {
            font-family: inherit;
        }
        
        /* Optimisations iPhone */
        @media (max-width: 768px) {
            /* D√©sactiver le redimensionnement sur mobile */
            .resize-handle {
                display: none !important;
            }
            
            /* Header sticky optimis√© pour iPhone */
            thead th {
                top: 0 !important;
                z-index: 100 !important;
            }
            
            /* Touch targets minimum 44px */
            button, select, input {
                min-height: 44px;
            }
            
            /* R√©duire padding sur petits √©crans */
            body {
                padding: 10px !important;
            }
        }
        
        /* Emp√™cher la s√©lection pendant le redimensionnement */
        body.resizing {
            user-select: none;
            cursor: col-resize;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // IndexedDB
        const DB_NAME = 'GonzFilmsDB';
        const STORE_NAME = 'films';
        
        const initDB = () => {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(DB_NAME, 1);
                request.onerror = () => reject(request.error);
                request.onsuccess = () => resolve(request.result);
                request.onupgradeneeded = (e) => {
                    const db = e.target.result;
                    if (!db.objectStoreNames.contains(STORE_NAME)) {
                        db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });
                    }
                };
            });
        };
        
        const saveFilms = async (films) => {
            const db = await initDB();
            const tx = db.transaction(STORE_NAME, 'readwrite');
            const store = tx.objectStore(STORE_NAME);
            await store.clear();
            for (const film of films) {
                await store.add(film);
            }
            return new Promise((resolve, reject) => {
                tx.oncomplete = () => resolve();
                tx.onerror = () => reject(tx.error);
            });
        };
        
        const loadFilms = async () => {
            const db = await initDB();
            const tx = db.transaction(STORE_NAME, 'readonly');
            const store = tx.objectStore(STORE_NAME);
            const request = store.getAll();
            return new Promise((resolve, reject) => {
                request.onsuccess = () => resolve(request.result);
                request.onerror = () => reject(request.error);
            });
        };
        
        function App() {
            const [films, setFilms] = useState([]);
            const [pasteText, setPasteText] = useState('');
            const [search, setSearch] = useState('');
            const [filterNote, setFilterNote] = useState('');
            const [filterStatus, setFilterStatus] = useState('');
            const [sortField, setSortField] = useState('');
            const [sortDirection, setSortDirection] = useState('asc');
            const [selectedFilm, setSelectedFilm] = useState(null);
            const [loading, setLoading] = useState(true);
            const [columnWidths, setColumnWidths] = useState({
                films: 200,
                titreOriginal: 180,
                annee: 80,
                realisateur: 150,
                acteurs: 200,
                categorie: 150,
                pays: 120,
                duree: 80,
                dateVue: 100,
                note: 80,
                commentaire: 250,
                decade: 80,
                statut: 80
            });
            const [resizing, setResizing] = useState(null);
            
            useEffect(() => {
                loadFilms().then(data => {
                    if (data.length > 0) setFilms(data);
                    setLoading(false);
                }).catch(() => setLoading(false));
            }, []);
            
            // Gestion du redimensionnement des colonnes
            useEffect(() => {
                if (!resizing) {
                    document.body.classList.remove('resizing');
                    return;
                }
                
                document.body.classList.add('resizing');
                
                const handleMouseMove = (e) => {
                    const delta = e.clientX - resizing.startX;
                    const newWidth = Math.max(60, resizing.startWidth + delta);
                    setColumnWidths(prev => ({
                        ...prev,
                        [resizing.column]: newWidth
                    }));
                };
                
                const handleMouseUp = () => {
                    setResizing(null);
                    document.body.classList.remove('resizing');
                };
                
                document.addEventListener('mousemove', handleMouseMove);
                document.addEventListener('mouseup', handleMouseUp);
                
                return () => {
                    document.removeEventListener('mousemove', handleMouseMove);
                    document.removeEventListener('mouseup', handleMouseUp);
                    document.body.classList.remove('resizing');
                };
            }, [resizing]);
            
            const startResize = (column, e) => {
                e.stopPropagation();
                setResizing({
                    column,
                    startX: e.clientX,
                    startWidth: columnWidths[column]
                });
            };
            
            const parseData = (text) => {
                // Nettoyer les """ parasites et espaces inutiles
                const cleaned = text
                    .replace(/"""/g, '')  // Supprimer les guillemets triples
                    .replace(/\r/g, '');  // Supprimer les retours chariot
                
                const lines = cleaned.split('\n').filter(l => l.trim());
                
                return lines.map((line, index) => {
                    // Split sur tab et nettoyer chaque cellule
                    const cells = line.split('\t').map(cell => cell.trim());
                    
                    // Extraction robuste avec mapping correct (colonnes H √† U = 14 colonnes)
                    const film = {
                        films: cells[0] || '',           // H
                        titreOriginal: cells[2] || '',   // J (cells[1] semble √™tre vide souvent)
                        annee: cells[3] || '',           // K
                        realisateur: cells[4] || '',     // L
                        acteurs: cells[5] || '',         // M
                        categorie: cells[6] || '',       // N
                        pays: cells[7] || '',            // O
                        duree: cells[8] || '',           // P
                        dateVue: cells[9] || '',         // Q
                        note: cells[10] || '',           // R
                        commentaire: cells[11] || '',    // S
                        decade: cells[12] || '',         // T
                        statut: cells[13] || ''          // U
                    };
                    
                    return film;
                }).filter(film => film.films); // Garder seulement les films avec un titre
            };
            
            const handleImport = async () => {
                const parsed = parseData(pasteText);
                await saveFilms(parsed);
                setFilms(parsed);
                setPasteText('');
            };
            
            const handlePaste = (e) => {
                // Force la mise √† jour du state sur iOS
                setTimeout(() => {
                    setPasteText(e.target.value);
                }, 10);
            };
            
            const handleClear = async () => {
                if (confirm('Supprimer tous les films ?')) {
                    await saveFilms([]);
                    setFilms([]);
                }
            };
            
            const handleExportJSON = () => {
                const dataStr = JSON.stringify(films, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'gonz_films_export.json';
                link.click();
                URL.revokeObjectURL(url);
            };
            
            const handleImportJSON = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = async (event) => {
                    try {
                        const imported = JSON.parse(event.target.result);
                        await saveFilms(imported);
                        setFilms(imported);
                        alert(`‚úÖ ${imported.length} films import√©s !`);
                    } catch (error) {
                        alert('‚ùå Erreur : fichier JSON invalide');
                    }
                };
                reader.readAsText(file);
            };
            
            const handleSort = (field) => {
                if (sortField === field) {
                    setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');
                } else {
                    setSortField(field);
                    setSortDirection('asc');
                }
            };
            
            const filteredFilms = useMemo(() => {
                let result = films.filter(film => {
                    const searchLower = search.toLowerCase();
                    const matchesSearch = !search || 
                        film.films.toLowerCase().includes(searchLower) ||
                        film.realisateur.toLowerCase().includes(searchLower);
                    const matchesNote = !filterNote || film.note === filterNote;
                    const matchesStatus = !filterStatus || film.statut.toLowerCase().includes(filterStatus.toLowerCase());
                    return matchesSearch && matchesNote && matchesStatus;
                });
                
                if (sortField) {
                    result.sort((a, b) => {
                        let aVal = a[sortField] || '';
                        let bVal = b[sortField] || '';
                        if (sortField === 'annee' || sortField === 'duree' || sortField === 'note') {
                            aVal = parseFloat(aVal) || 0;
                            bVal = parseFloat(bVal) || 0;
                        }
                        if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;
                        if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;
                        return 0;
                    });
                }
                
                return result;
            }, [films, search, filterNote, filterStatus, sortField, sortDirection]);
            
            const getNoteClass = (note) => {
                if (note === '3') return '#22c55e';
                if (note === '2') return '#84cc16';
                if (note === '1') return '#facc15';
                if (note === '0') return '#f97316';
                if (note === '-1') return '#ef4444';
                return '#6b7280';
            };
            
            if (loading) {
                return (
                    <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100vh'}}>
                        <div style={{textAlign: 'center'}}>
                            <div style={{fontSize: '48px', marginBottom: '15px'}}>üé¨</div>
                            <div style={{fontSize: '18px'}}>Chargement...</div>
                        </div>
                    </div>
                );
            }
            
            if (films.length === 0) {
                return (
                    <div style={{maxWidth: '800px', margin: '50px auto', padding: '20px'}}>
                        <h1 style={{fontSize: '32px', marginBottom: '20px', textAlign: 'center'}}>
                            üé¨ Gonz Films
                        </h1>
                        
                        {/* Bouton Import JSON en premier */}
                        <div style={{marginBottom: '30px', textAlign: 'center'}}>
                            <label style={{
                                display: 'inline-block',
                                padding: '16px 32px',
                                background: '#10b981',
                                color: 'white',
                                borderRadius: '8px',
                                fontSize: '18px',
                                fontWeight: '600',
                                cursor: 'pointer',
                                boxShadow: '0 4px 6px rgba(0,0,0,0.3)'
                            }}>
                                üì• Import JSON
                                <input
                                    type="file"
                                    accept=".json"
                                    onChange={handleImportJSON}
                                    style={{display: 'none'}}
                                />
                            </label>
                            <div style={{marginTop: '10px', fontSize: '14px', color: '#6b7280'}}>
                                Si vous avez d√©j√† export√© vos films
                            </div>
                        </div>
                        
                        <div style={{textAlign: 'center', margin: '30px 0', color: '#6b7280', fontSize: '16px', fontWeight: '600'}}>
                            ‚Äî OU ‚Äî
                        </div>
                        
                        <div style={{background: '#1e293b', padding: '20px', borderRadius: '8px', marginBottom: '20px'}}>
                            <h2 style={{fontSize: '18px', marginBottom: '10px'}}>üìã M√©thode 1 : Import Excel (Mac uniquement)</h2>
                            <ol style={{paddingLeft: '20px', lineHeight: '1.8', color: '#9ca3af'}}>
                                <li>Ouvrez votre fichier Excel <strong>GONZ FILMS</strong></li>
                                <li>S√©lectionnez les colonnes <strong>H √† U</strong> (14 colonnes)</li>
                                <li>S√©lectionnez toutes les lignes (sans l'en-t√™te)</li>
                                <li>Copiez (Cmd+C)</li>
                                <li>Collez ci-dessous (Cmd+V)</li>
                            </ol>
                        </div>
                        <div style={{background: '#1e3a1e', padding: '20px', borderRadius: '8px', marginBottom: '20px', border: '2px solid #10b981'}}>
                            <h2 style={{fontSize: '18px', marginBottom: '10px', color: '#10b981'}}>üí° √Ä propos de l'Import JSON</h2>
                            <div style={{lineHeight: '1.8', color: '#9ca3af'}}>
                                <p style={{marginBottom: '10px'}}>Le fichier JSON est cr√©√© sur Mac/PC apr√®s avoir import√© vos films via Excel.</p>
                                <p>Une fois que vous avez le fichier <code>gonz_films_export.json</code> dans iCloud Drive, utilisez le bouton <strong>"üì• Import JSON"</strong> ci-dessus pour importer instantan√©ment tous vos films !</p>
                            </div>
                        </div>
                        <textarea
                            value={pasteText}
                            onChange={(e) => setPasteText(e.target.value)}
                            onPaste={handlePaste}
                            onInput={(e) => setPasteText(e.target.value)}
                            placeholder="Collez vos donn√©es ici..."
                            style={{
                                width: '100%',
                                minHeight: '200px',
                                padding: '12px',
                                background: '#1e293b',
                                color: '#e2e8f0',
                                border: '1px solid #334155',
                                borderRadius: '8px',
                                fontSize: '14px',
                                marginBottom: '15px',
                                fontFamily: 'monospace'
                            }}
                        />
                        <div style={{fontSize: '14px', color: '#6b7280', marginBottom: '15px'}}>
                            Lignes d√©tect√©es : {pasteText.split('\n').filter(l => l.trim()).length}
                        </div>
                        <button
                            onClick={handleImport}
                            disabled={!pasteText}
                            style={{
                                width: '100%',
                                padding: '12px',
                                background: pasteText ? '#3b82f6' : '#374151',
                                color: 'white',
                                borderRadius: '8px',
                                fontSize: '16px',
                                fontWeight: '600'
                            }}
                        >
                            ‚úÖ Importer {pasteText.split('\n').filter(l => l.trim()).length} films
                        </button>
                    </div>
                );
            }
            
            return (
                <div style={{padding: '20px', minHeight: '100vh'}}>
                    {/* Header */}
                    <div style={{marginBottom: '20px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '10px'}}>
                        <div>
                            <h1 style={{fontSize: '28px', marginBottom: '5px'}}>üé¨ Gonz Films</h1>
                            <div style={{fontSize: '14px', color: '#6b7280'}}>
                                {filteredFilms.length} films {filteredFilms.length !== films.length && `sur ${films.length}`}
                            </div>
                        </div>
                        <div style={{display: 'flex', gap: '10px', flexWrap: 'wrap'}}>
                            <button
                                onClick={handleExportJSON}
                                style={{
                                    padding: '8px 16px',
                                    background: '#10b981',
                                    color: 'white',
                                    borderRadius: '6px',
                                    fontSize: '14px',
                                    fontWeight: '600'
                                }}
                            >
                                üíæ Export JSON
                            </button>
                            <label style={{
                                padding: '8px 16px',
                                background: '#3b82f6',
                                color: 'white',
                                borderRadius: '6px',
                                fontSize: '14px',
                                fontWeight: '600',
                                cursor: 'pointer',
                                display: 'inline-block'
                            }}>
                                üì• Import JSON
                                <input
                                    type="file"
                                    accept=".json"
                                    onChange={handleImportJSON}
                                    style={{display: 'none'}}
                                />
                            </label>
                            <button
                                onClick={handleClear}
                                style={{
                                    padding: '8px 16px',
                                    background: '#ef4444',
                                    color: 'white',
                                    borderRadius: '6px',
                                    fontSize: '14px',
                                    fontWeight: '600'
                                }}
                            >
                                üóëÔ∏è Effacer
                            </button>
                        </div>
                    </div>
                    
                    {/* Filters */}
                    <div style={{marginBottom: '20px', display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '12px'}}>
                        <input
                            type="text"
                            placeholder="üîç Rechercher..."
                            value={search}
                            onChange={(e) => setSearch(e.target.value)}
                            style={{
                                padding: '10px 12px',
                                background: '#1e293b',
                                color: '#e2e8f0',
                                border: '1px solid #334155',
                                borderRadius: '8px',
                                fontSize: '14px'
                            }}
                        />
                        <select
                            value={filterNote}
                            onChange={(e) => setFilterNote(e.target.value)}
                            style={{
                                padding: '10px 12px',
                                background: '#1e293b',
                                color: '#e2e8f0',
                                border: '1px solid #334155',
                                borderRadius: '8px',
                                fontSize: '14px'
                            }}
                        >
                            <option value="">Toutes les notes</option>
                            <option value="3">‚≠ê 3</option>
                            <option value="2">‚≠ê 2</option>
                            <option value="1">‚≠ê 1</option>
                            <option value="0">‚≠ê 0</option>
                            <option value="-1">‚≠ê -1</option>
                        </select>
                        <select
                            value={filterStatus}
                            onChange={(e) => setFilterStatus(e.target.value)}
                            style={{
                                padding: '10px 12px',
                                background: '#1e293b',
                                color: '#e2e8f0',
                                border: '1px solid #334155',
                                borderRadius: '8px',
                                fontSize: '14px'
                            }}
                        >
                            <option value="">Tous les statuts</option>
                            <option value="Vu">Vu</option>
                            <option value="A voir">√Ä voir</option>
                        </select>
                    </div>
                    
                    {/* Table */}
                    <div style={{background: '#1e293b', borderRadius: '8px', overflowX: 'auto'}}>
                        <table style={{width: '100%', borderCollapse: 'collapse', minWidth: '1200px'}}>
                            <thead>
                                <tr>
                                    {['films', 'titreOriginal', 'annee', 'realisateur', 'acteurs', 'categorie', 'pays', 'duree', 'dateVue', 'note', 'commentaire', 'decade', 'statut'].map(field => (
                                        <th
                                            key={field}
                                            onClick={() => handleSort(field)}
                                            style={{
                                                padding: '12px 8px',
                                                textAlign: 'left',
                                                fontSize: '12px',
                                                fontWeight: '600',
                                                borderBottom: '2px solid #334155',
                                                background: sortField === field ? '#334155' : '#1e293b',
                                                position: 'sticky',
                                                top: 0,
                                                cursor: 'pointer',
                                                userSelect: 'none',
                                                whiteSpace: 'nowrap',
                                                width: `${columnWidths[field]}px`,
                                                minWidth: `${columnWidths[field]}px`,
                                                maxWidth: `${columnWidths[field]}px`,
                                                zIndex: 10,
                                                position: 'relative'
                                            }}
                                        >
                                            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>
                                                <span>
                                                    {field === 'films' && 'Titre FR'}
                                                    {field === 'titreOriginal' && 'Titre Original'}
                                                    {field === 'annee' && 'Ann√©e'}
                                                    {field === 'realisateur' && 'R√©alisateur'}
                                                    {field === 'acteurs' && 'Acteurs'}
                                                    {field === 'categorie' && 'Cat√©gorie'}
                                                    {field === 'pays' && 'Pays'}
                                                    {field === 'duree' && 'Dur√©e'}
                                                    {field === 'dateVue' && 'Date vue'}
                                                    {field === 'note' && 'Note'}
                                                    {field === 'commentaire' && 'Commentaire'}
                                                    {field === 'decade' && 'D√©cade'}
                                                    {field === 'statut' && 'Statut'}
                                                    {sortField === field && (sortDirection === 'asc' ? ' ‚Üë' : ' ‚Üì')}
                                                </span>
                                                <div
                                                    className="resize-handle"
                                                    onMouseDown={(e) => startResize(field, e)}
                                                    style={{
                                                        width: '4px',
                                                        height: '100%',
                                                        position: 'absolute',
                                                        right: 0,
                                                        top: 0,
                                                        cursor: 'col-resize',
                                                        background: 'transparent',
                                                        zIndex: 11
                                                    }}
                                                    onMouseEnter={(e) => e.currentTarget.style.background = '#3b82f6'}
                                                    onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}
                                                />
                                            </div>
                                        </th>
                                    ))}
                                </tr>
                            </thead>
                            <tbody>
                                {filteredFilms.map((film, i) => (
                                    <tr
                                        key={i}
                                        onClick={() => setSelectedFilm(film)}
                                        style={{
                                            cursor: 'pointer',
                                            background: 'transparent'
                                        }}
                                        onMouseEnter={(e) => e.currentTarget.style.background = '#334155'}
                                        onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}
                                    >
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', fontWeight: '600', width: `${columnWidths.films}px`, maxWidth: `${columnWidths.films}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.films}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', color: '#9ca3af', width: `${columnWidths.titreOriginal}px`, maxWidth: `${columnWidths.titreOriginal}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.titreOriginal}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.annee}px`, maxWidth: `${columnWidths.annee}px`}}>{film.annee}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.realisateur}px`, maxWidth: `${columnWidths.realisateur}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.realisateur}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.acteurs}px`, maxWidth: `${columnWidths.acteurs}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.acteurs}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.categorie}px`, maxWidth: `${columnWidths.categorie}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.categorie}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.pays}px`, maxWidth: `${columnWidths.pays}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.pays}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.duree}px`, maxWidth: `${columnWidths.duree}px`}}>{film.duree}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.dateVue}px`, maxWidth: `${columnWidths.dateVue}px`}}>{film.dateVue}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.note}px`, maxWidth: `${columnWidths.note}px`}}>
                                            {film.note && (
                                                <span style={{
                                                    display: 'inline-block',
                                                    padding: '2px 8px',
                                                    borderRadius: '4px',
                                                    background: getNoteClass(film.note),
                                                    color: ['3', '2', '1'].includes(film.note) ? '#000' : '#fff',
                                                    fontSize: '12px',
                                                    fontWeight: '600'
                                                }}>
                                                    {film.note}
                                                </span>
                                            )}
                                        </td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.commentaire}px`, maxWidth: `${columnWidths.commentaire}px`, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap'}}>{film.commentaire}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.decade}px`, maxWidth: `${columnWidths.decade}px`}}>{film.decade}</td>
                                        <td style={{padding: '10px 8px', borderBottom: '1px solid #334155', width: `${columnWidths.statut}px`, maxWidth: `${columnWidths.statut}px`}}>
                                            <span style={{
                                                padding: '2px 8px',
                                                borderRadius: '4px',
                                                fontSize: '11px',
                                                fontWeight: '600',
                                                background: '#334155',
                                                color: '#94a3b8'
                                            }}>
                                                {film.statut}
                                            </span>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    
                    {filteredFilms.length === 0 && (
                        <div style={{textAlign: 'center', padding: '50px', color: '#6b7280'}}>
                            Aucun film trouv√© avec ces filtres.
                        </div>
                    )}
                    
                    {/* Modal */}
                    {selectedFilm && (
                        <div
                            onClick={() => setSelectedFilm(null)}
                            style={{
                                position: 'fixed',
                                top: 0,
                                left: 0,
                                right: 0,
                                bottom: 0,
                                background: 'rgba(0, 0, 0, 0.8)',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                zIndex: 1000,
                                padding: '20px',
                                overflowY: 'auto'
                            }}
                        >
                            <div
                                onClick={(e) => e.stopPropagation()}
                                style={{
                                    background: '#1e293b',
                                    borderRadius: '12px',
                                    maxWidth: '800px',
                                    width: '100%',
                                    maxHeight: '90vh',
                                    overflowY: 'auto'
                                }}
                            >
                                <div style={{
                                    position: 'sticky',
                                    top: 0,
                                    background: '#1e293b',
                                    padding: '20px',
                                    borderBottom: '1px solid #334155',
                                    zIndex: 10
                                }}>
                                    <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'start'}}>
                                        <div style={{flex: 1}}>
                                            <h2 style={{fontSize: '24px', fontWeight: 'bold', marginBottom: '5px'}}>{selectedFilm.films}</h2>
                                            {selectedFilm.titreOriginal && (
                                                <div style={{fontSize: '14px', color: '#9ca3af', marginBottom: '10px'}}>{selectedFilm.titreOriginal}</div>
                                            )}
                                            <div style={{display: 'flex', gap: '10px', flexWrap: 'wrap', alignItems: 'center'}}>
                                                {selectedFilm.annee && <span style={{fontSize: '14px'}}>{selectedFilm.annee}</span>}
                                                {selectedFilm.duree && <span style={{fontSize: '14px', color: '#9ca3af'}}>{selectedFilm.duree} min</span>}
                                                {selectedFilm.note && (
                                                    <span style={{
                                                        padding: '2px 8px',
                                                        borderRadius: '4px',
                                                        background: getNoteClass(selectedFilm.note),
                                                        color: ['3', '2', '1'].includes(selectedFilm.note) ? '#000' : '#fff',
                                                        fontSize: '12px',
                                                        fontWeight: '600'
                                                    }}>
                                                        ‚≠ê {selectedFilm.note}
                                                    </span>
                                                )}
                                            </div>
                                        </div>
                                        <button
                                            onClick={() => setSelectedFilm(null)}
                                            style={{
                                                fontSize: '28px',
                                                lineHeight: '1',
                                                color: '#9ca3af',
                                                background: 'transparent',
                                                marginLeft: '15px'
                                            }}
                                        >
                                            √ó
                                        </button>
                                    </div>
                                </div>
                                
                                <div style={{padding: '20px'}}>
                                    {selectedFilm.realisateur && (
                                        <div style={{marginBottom: '16px'}}>
                                            <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>R√©alisateur</div>
                                            <div style={{fontSize: '15px', fontWeight: '600'}}>{selectedFilm.realisateur}</div>
                                        </div>
                                    )}
                                    
                                    {selectedFilm.acteurs && (
                                        <div style={{marginBottom: '16px'}}>
                                            <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>Acteurs</div>
                                            <div style={{fontSize: '15px', lineHeight: '1.6'}}>{selectedFilm.acteurs}</div>
                                        </div>
                                    )}
                                    
                                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '16px', marginBottom: '16px'}}>
                                        {selectedFilm.categorie && (
                                            <div>
                                                <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>Cat√©gorie</div>
                                                <div style={{fontSize: '15px'}}>{selectedFilm.categorie}</div>
                                            </div>
                                        )}
                                        {selectedFilm.pays && (
                                            <div>
                                                <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>Pays</div>
                                                <div style={{fontSize: '15px'}}>{selectedFilm.pays}</div>
                                            </div>
                                        )}
                                        {selectedFilm.decade && (
                                            <div>
                                                <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>D√©cade</div>
                                                <div style={{fontSize: '15px'}}>{selectedFilm.decade}</div>
                                            </div>
                                        )}
                                        {selectedFilm.dateVue && (
                                            <div>
                                                <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>Date vue</div>
                                                <div style={{fontSize: '15px'}}>{selectedFilm.dateVue}</div>
                                            </div>
                                        )}
                                    </div>
                                    
                                    {selectedFilm.commentaire && (
                                        <div>
                                            <div style={{fontSize: '11px', textTransform: 'uppercase', letterSpacing: '0.5px', color: '#64748b', marginBottom: '4px', fontWeight: '600'}}>Commentaire</div>
                                            <div style={{
                                                background: '#0f172a',
                                                padding: '16px',
                                                borderRadius: '8px',
                                                fontSize: '15px',
                                                lineHeight: '1.6',
                                                whiteSpace: 'pre-wrap'
                                            }}>
                                                {selectedFilm.commentaire}
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
